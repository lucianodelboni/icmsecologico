{% extends "base_admin.html" %}
{% block addhead %}
{% endblock %}
{% block content %}
{% endblock %}
{% block body%}

<p style="padding:20px; font-weight:bold;">Lista de usuários cadastrados no Siseco:</p>

{% with messages = get_flashed_messages() %}
	{% if messages %}
		{% for message in messages %}
			<p class="msg__error">{{ message }}</p>
		{% endfor %}
	{% endif %}
{% endwith %}

<div class="container-fluid justify-content-center">

	<!--Cadastrar novo usuário-->
	<button data-toggle="modal" class="btn btn-info" data-target="#modal_add_usr">Novo</button>

	<div class="modal fade" id="modal_add_usr" tabindex="-1" role="dialog" aria-labelledby="#modal2" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<form method="POST">
					<div class="modal-header">
						<h5 class="modal-title" id="modal2">Cadastro de Novo Usuário</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
					</div>
					<div class="modal-body">

							<div class="form-group">
								<label>Nome do Municípios/Técnico:</label>
					        	<input name="new_username" class="form-control" type="text">
							</div>
							<div class="form-group">
								<label>Nome para login:</label>
					        	<input name="new_user" class="form-control" type="text">
							</div>
							<div class="form-group">
								<label>Senha:</label>
					        	<input name="new_pwd" class="form-control" type="text">
							</div>
							<div class="form-group">
								<label>Tipo de usuário:</label>
								<select name="new_usr_type" class="form-control">
									<option value="ext">Externo</a>
									<option value="tech">Técnico</a>
								</select>
							</div>

					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
						<button name="action" type="submit" class="btn btn-primary" value="add">Salvar</button>
					</div>
				</form>
			</div>
		</div>
	</div>


	<!--Editar informações do usuário existente-->
	<button class="btn btn-info">Editar</button>


	<!--deletar usuário existente-->
	<button data-toggle="modal" class="btn btn-info" data-target="#modal_del_usr">Deletar</button>

	<div class="modal fade" id="modal_del_usr" tabindex="-1" role="dialog" aria-labelledby="#modal2" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<form method="POST">
					<div class="modal-header">
						<h5 class="modal-title" id="modal2">Exclusão de Usuário Existente</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
					</div>
					<div class="modal-body">

							<div class="form-group">
								<label>Digite o ID do usuário que deseja excluir:</label>
					        	<input name="user_id" class="form-control" type="text">
							</div>

					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
						<button name="action" type="submit" class="btn btn-primary" value="del">Excluir</button>
					</div>
				</form>
			</div>
		</div>
	</div>

	<!--randomizar senhas dos usuários externos-->
	<button class="btn btn-info">Randomizar senhas (ext)</button>

</div>


<div class="container-fluid justify-content-center" id="usuarios" style="padding:10px;">
	<table class="tbl">
		
		<tr class="tbl_h">
			<th>ID</th>
			<th>Município/Nome</th>
			<th>Usuário</th>
			<th>Senha</th>
			<th>Tipo de acesso</th>
		</tr>
		{% for row in data %}
		<tr class="tbl_r">
			{% for cell in row %}
			<td class="tbl_c">{{cell}}</td>
			{% endfor %}
		</tr>
		{% endfor %}
	</table>
</div>


{% endblock %}


